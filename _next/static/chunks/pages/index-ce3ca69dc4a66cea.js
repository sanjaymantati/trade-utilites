(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(5229)}])},5229:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return j}});var r=t(5893),s=t(7294),l=t(682),n=t(4051),c=t(1555),o=t(3680),i=t(9396),d=t(4119),m=t(3561),u=t(7525),h=t(1479),x=t(7977),p=function(e){let{data:a,sector:t,color:l}=e,[n,c]=(0,s.useState)(""),[o,i]=(0,s.useState)("R"),[d,m]=(0,s.useState)("desc"),p=a.filter(e=>parseFloat(e.percentage_changes)>=0).length,b=a.length-p,j=(p/a.length*100).toFixed(2),g=(b/a.length*100).toFixed(2),_=(0,s.useMemo)(()=>a.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())),[a,n]),f=(0,s.useMemo)(()=>o?[..._].sort((e,a)=>{let t,r;switch(o){case"Symbol":t=e.name,r=a.name;break;case"Pre C":t=e.pre_market_value,r=a.pre_market_value;break;case"%":t=parseFloat(e.percentage_changes),r=parseFloat(a.percentage_changes);break;case"R":t=parseFloat(e.factor_value),r=parseFloat(a.factor_value);break;default:t=e[o],r=a[o]}return"string"==typeof t&&"string"==typeof r?"asc"===d?t.localeCompare(r):r.localeCompare(t):"asc"===d?t-r:r-t}):_,[_,o,d]),v=e=>{o===e?m("asc"===d?"desc":"asc"):(i(e),m("desc"))};function y(e){let a=new Date(1e3*e);return a.toLocaleTimeString("en-IN",{timeZone:"Asia/Kolkata",hour:"numeric",minute:"2-digit",hour12:!0})}return(0,r.jsx)("div",{children:(0,r.jsxs)(u.Z,{className:"mycard m2",style:{backgroundColor:l},children:[(0,r.jsx)(u.Z.Header,{className:"mycard-header",children:(0,r.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,r.jsxs)(u.Z.Title,{as:"b",className:"mb-0 ",children:[t.name.replace("NIFTY ","")," (",t.performance>0?"+":"",t.performance.toFixed(2),"%)"]}),(0,r.jsxs)("div",{className:"px-3 py-2",children:[(0,r.jsxs)(h.Z,{children:[(0,r.jsx)(h.Z,{variant:"success",now:j,label:"".concat(p)},1),(0,r.jsx)(h.Z,{variant:"danger",now:g,label:"".concat(b)},2)]}),(0,r.jsx)("input",{type:"text",placeholder:"Search...",className:"form-control form-control-sm",value:n,onChange:e=>c(e.target.value)})]})]})}),(0,r.jsx)(u.Z.Body,{className:"p-0 mycard-body",children:(0,r.jsx)("div",{className:"table-responsive",children:(0,r.jsxs)("table",{className:"table table-sm table-hover mb-0",children:[(0,r.jsx)("thead",{className:"thead-light",children:(0,r.jsxs)("tr",{children:[(0,r.jsxs)("th",{onClick:()=>v("Symbol"),children:["Symbol ","Symbol"===o&&("asc"===d?"▲":"▼")]}),(0,r.jsxs)("th",{onClick:()=>v("%"),children:["% ","%"===o&&("asc"===d?"▲":"▼")]}),(0,r.jsxs)("th",{onClick:()=>v("R"),children:["R ","R"===o&&("asc"===d?"▲":"▼")]}),(0,r.jsxs)("th",{onClick:()=>v("a"),children:["Signal ","a"===o&&("asc"===d?"▲":"▼")]})]})}),(0,r.jsx)("tbody",{className:"mycard-table-body",children:f.map(e=>{var a,t,s;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"font-weight-bold",children:(0,r.jsx)("b",{children:e.name})}),(0,r.jsx)("td",{className:e.percentage_changes>=0?"text-success":"text-danger",children:e.percentage_changes>0?(0,r.jsxs)(x.Z,{bg:"success",children:[e.percentage_changes," ▲"]}):(0,r.jsxs)(x.Z,{bg:"danger",children:[e.percentage_changes," ▼"]})}),(0,r.jsx)("td",{children:e.factor_value.toFixed(2)}),(0,r.jsx)("td",{children:e.breakout?(null===(a=e.breakout)||void 0===a?void 0:a.signal)==="BULL"?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x.Z,{bg:"success",children:[null===(t=e.breakout)||void 0===t?void 0:t.factor_value," ▲"]}),(0,r.jsx)(x.Z,{children:y(e.breakout.timestamp)})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x.Z,{bg:"danger",children:[null===(s=e.breakout)||void 0===s?void 0:s.factor_value," ▼"]}),(0,r.jsx)(x.Z,{children:y(e.breakout.timestamp)})]}):"-"})]},e.name)})})]})})})]})})};let b=()=>{let[e,a]=(0,s.useState)(""),[t,u]=(0,s.useState)([]),[h,x]=(0,s.useState)(!1),[b,j]=(0,s.useState)(!1),g=(0,s.useMemo)(()=>{let a=t.filter(a=>{let t=a.securities.filter(a=>a.name.toLowerCase().includes(e.toLowerCase()));return t.length});return a.map(a=>(a.securities=a.securities.filter(a=>{let t=!1;return""===e?!h||void 0!==a.breakout:(""!==e&&(h&&(t=void 0!==a.breakout),t=a.name.toLowerCase().includes(e.toLowerCase())),t)}),a))},[t,e,h]);async function _(e){var a,t,r;e.preventDefault();let s=JSON.parse(e.target.sector_data.value),l=JSON.parse(e.target.security_data.value),n=JSON.parse(e.target.breakout_data.value),c=(a=s,t=l,r=n,a=a.payload.data,t=t.payload.data,r=r.payload.data,a.map(e=>{let a=e.Symbol,s=e.param_3,l=Object.entries(t["".concat(a,"_r_factor")]||{}).map(e=>{let[a,t]=e;return{name:a,current_value:t.param_0,pre_market_value:t.param_1,percentage_changes:t.param_2,factor_value:t.param_3}});return l=l.map(e=>{let a=r.breakout_beacon,t=r.intraday_boost,s={...e},l=a.filter(a=>a.Symbol==e.name);l.length>0&&(s.breakout={signal:l[0].param_2,factor_value:l[0].param_1,timestamp:l[0].param_3});let n=t.filter(a=>a.Symbol==e.name);return n.length>0&&(s.intraday={factor_value:n[0].param_3}),s}),{name:a,performance:s,securities:l}}));u(c),localStorage.setItem("master_data",JSON.stringify(c)),j(!1)}(0,s.useEffect)(()=>{let e=localStorage.getItem("master_data");e&&u(JSON.parse(e))},[]);let f=t.map(e=>e.performance);return(0,r.jsx)(s.Fragment,{children:(0,r.jsxs)(l.Z,{fluid:!0,className:"bg-dark pt-2",children:[(0,r.jsx)(m.Z,{children:(0,r.jsxs)(n.Z,{children:[(0,r.jsx)(c.Z,{md:3,className:"mb-2",children:(0,r.jsx)("input",{type:"text",placeholder:"Search...",className:"form-control form-control-sm",value:e,onChange:e=>a(e.target.value)})}),(0,r.jsx)(c.Z,{md:1,className:"mb-2",children:(0,r.jsx)(m.Z.Check,{type:"switch",id:"custom-switch",label:"Breakout",onChange:()=>x(!h)})}),(0,r.jsx)(c.Z,{md:2,className:"mb-2",children:(0,r.jsx)(o.Z,{variant:"primary",onClick:()=>j(!0),size:"sm",children:"Add Data"})})]})}),(0,r.jsx)("div",{children:(0,r.jsxs)(i.Z,{show:b,onHide:()=>j(!1),size:"xl","aria-labelledby":"contained-modal-title-vcenter",fullscreen:!0,centered:!0,children:[(0,r.jsx)(i.Z.Header,{closeButton:!0,children:(0,r.jsx)(i.Z.Title,{children:"Add Data"})}),(0,r.jsx)(i.Z.Body,{children:(0,r.jsxs)(m.Z,{onSubmit:_,children:[(0,r.jsx)(d.Z,{controlId:"sector_data",label:"Sector data",className:"mb-3",children:(0,r.jsx)(m.Z.Control,{as:"textarea"})}),(0,r.jsx)(d.Z,{controlId:"security_data",label:"Security data",className:"mb-3",children:(0,r.jsx)(m.Z.Control,{as:"textarea",required:!0})}),(0,r.jsx)(d.Z,{controlId:"breakout_data",label:"Breakout",className:"mb-3",children:(0,r.jsx)(m.Z.Control,{as:"textarea",required:!0})}),(0,r.jsx)(o.Z,{variant:"primary",type:"submit",className:"mt-2",children:"Execute"})]})}),(0,r.jsx)(i.Z.Footer,{children:(0,r.jsx)(o.Z,{variant:"secondary",onClick:()=>j(!1),children:"Close"})})]})}),(0,r.jsx)(n.Z,{className:"flex-nowrap overflow-scroll",children:g.map(e=>(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(c.Z,{md:3,children:(0,r.jsx)(p,{sector:e,data:e.securities,color:function(e,a){let t=Math.min(...e),r=Math.max(0,Math.min(1,(a-t)/(Math.max(...e)-t)));return"rgba(".concat(Math.round(255*(1-r)),", ").concat(Math.round(128*r),", ").concat(0,", 0.3)")}(f,e.performance)})})}))})]})})};var j=b}},function(e){e.O(0,[867,806,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);